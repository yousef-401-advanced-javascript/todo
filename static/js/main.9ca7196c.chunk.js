(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{123:function(e,t,n){e.exports=n(255)},128:function(e,t,n){},133:function(e,t){},135:function(e,t){},149:function(e,t){},151:function(e,t){},179:function(e,t){},181:function(e,t){},182:function(e,t){},188:function(e,t){},190:function(e,t){},208:function(e,t){},211:function(e,t){},227:function(e,t){},230:function(e,t){},255:function(e,t,n){"use strict";n.r(t);var a=n(113),c=n(114),o=n(122),r=n(120),l=n(0),u=n.n(l),i=n(115),s=n.n(i),m=n(4),d=n(14),f=n(55),p=function(e){var t=Object(l.useState)({}),n=Object(m.a)(t,2),a=n[0],c=n[1];return[function(e){c(Object(f.a)(Object(f.a)({},a),{},Object(d.a)({},e.target.name,e.target.value)))},function(t){t.preventDefault(),t.target.reset(),e.handleSubmit(a),c({type:"reset"})}]};var g=function(e){var t=p(e),n=Object(m.a)(t,2),a=n[0],c=n[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",null,"Add Item"),u.a.createElement("form",{onSubmit:c},u.a.createElement("label",null,u.a.createElement("span",null,"To Do Item"),u.a.createElement("input",{name:"text",placeholder:"Add To Do List Item",onChange:a})),u.a.createElement("label",null,u.a.createElement("span",null,"Difficulty Rating"),u.a.createElement("input",{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:a})),u.a.createElement("label",null,u.a.createElement("span",null,"Assigned To"),u.a.createElement("input",{type:"text",name:"assignee",placeholder:"Assigned To",onChange:a})),u.a.createElement("button",null,"Add Item")))},E=u.a.createContext();var h=function(e){var t=Object(l.useState)(!0),n=Object(m.a)(t,2),a=n[0],c=n[1],o=Object(l.useState)("difficulty"),r=Object(m.a)(o,2),i=r[0],s=r[1],d=Object(l.useState)(3),f=Object(m.a)(d,2),p=f[0],g=f[1],h=Object(l.useState)(0),b=Object(m.a)(h,2),O=b[0],j=b[1],v=Object(l.useState)(1),y=Object(m.a)(v,2),S=y[0],C=y[1],T={display:a,itemsPerPage:p,numbersOfPages:O,currentPage:S,sortType:i,changeDisplay:c,changeItemsPerPage:g,changeNumberOfPages:j,changeCurrentPage:C,changeSortType:s,toggleMode:function(){c(!T.display)}};return u.a.createElement(E.Provider,{value:T},e.children)},b={true:{display:"block"},false:{display:"none"}};var O=function(e){var t=Object(l.useContext)(E),n=t.currentPage*t.itemsPerPage,a=n-t.itemsPerPage,c=e.list.slice(a,n);return u.a.createElement("ul",null,c.map((function(n){return u.a.createElement("li",{className:"complete-".concat(n.complete.toString()),key:n._id,style:n.complete!==t.display?b[t.display]:void 0},u.a.createElement("span",{onClick:function(){return e.handleComplete(n._id)}}," ",n.text,"  ",u.a.createElement("span",null," ",n.assignee,"   ")," "),u.a.createElement("button",{onClick:function(){return e.deleteHandler1(n._id)}},"Delete"))})))};function j(e){var t=Object(l.useContext)(E);return u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",null,"completed display"),u.a.createElement("button",{className:t.display.toString(),onClick:t.toggleMode},t.display?"don't show completed":"show completed"))}function v(e){for(var t={pagination:{display:"inline-block"}},n=[],a=Object(l.useContext)(E),c=1;c<=Math.ceil(e.list.length/a.itemsPerPage);c++)n.push(c);return u.a.createElement(u.a.Fragment,null,u.a.createElement("nav",null,u.a.createElement("ul",null,n.map((function(e){return u.a.createElement("li",{key:e},u.a.createElement("button",{onClick:function(){return t=e,a.changeCurrentPage(t);var t},style:t.pagination},e))})))))}var y=n(121);var S=function(){var e="https://lab3232.herokuapp.com/todo",t=Object(l.useState)([]),n=Object(m.a)(t,2),a=n[0],c=n[1];return[a,function(t){t.due=new Date,fetch(e,{method:"post",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){c([].concat(Object(y.a)(a),[e]))})).catch(console.error),console.log("add",a)},function(t){var n=a.filter((function(e){return e._id===t}))[0]||{};if(n._id){n.complete=!n.complete;var o="".concat(e);fetch(o,{method:"put",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",bo:t},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){c(a.map((function(t){return t._id===n._id?e:t})))})).catch(console.error)}},function(){fetch(e,{method:"get",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return c(e)})).catch(console.error)},function(t){var n=a.filter((function(e){return e._id===t}))[0]||{},o="".concat(e);fetch(o,{method:"delete",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",bo:t},body:n?JSON.stringify(n):void 0}).then((function(e){return e.json()})).then((function(e){c(a.filter((function(e){return e._id!==t})))})).catch(console.error)}]},C=(n(128),function(){var e=S(),t=Object(m.a)(e,5),n=t[0],a=t[1],c=t[2],o=t[3],r=t[4];return Object(l.useEffect)(o,[]),u.a.createElement(u.a.Fragment,null,u.a.createElement(j,null),u.a.createElement("header",null,u.a.createElement("h2",null,"There are ",n.filter((function(e){return!e.complete})).length,"; Items To Complete")),u.a.createElement("section",{className:"todo"},u.a.createElement("div",null,u.a.createElement(g,{handleSubmit:a})),u.a.createElement("div",null,u.a.createElement(O,{list:n,handleComplete:c,deleteHandler1:r}),u.a.createElement(v,{list:n}))))}),T=n(116),_=n.n(T),P=n(117),I=n.n(P),D=n(118),k=n.n(D),x=n(119),N=n.n(x);k.a.config();var L=Object({NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_SERVER||"https://auth-server-401.herokuapp.com",R=Object({NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).JWT_SECRET||"mysecret",A=u.a.createContext();function w(e){var t=Object(l.useState)(!1),n=Object(m.a)(t,2),a=n[0],c=n[1],o=Object(l.useState)((function(e,t){N.a.post("".concat(L,"/signin")).set("authorization","Basic ".concat(btoa("".concat(e,":").concat(t)))).then((function(e){!function(e){try{var t=I.a.verify(e,R);console.log("VERIFIED",t),v(!0,e,t)}catch(n){v(!1,null,{}),console.log("Token validation Error",n.message)}}(e.body.token)})).catch(console.error)})),r=Object(m.a)(o,2),i=r[0],s=r[1],d=Object(l.useState)({}),f=Object(m.a)(d,2),p=f[0],g=f[1],E=Object(l.useState)((function(){v(!1,null,{})})),h=Object(m.a)(E,2),b=h[0],O=h[1];console.log("user",p);var j={loggedIn:a,logIn:i,logOut:b,user:p,setLoggedIn:c,setLogIn:s,setLogOut:O,setUser:g};function v(e,t,n){_.a.save("auth",t),c(e),s(t),g(n)}return u.a.createElement(A.Provider,{value:j},e.children)}var H=function(e){return e.condition?e.children:null};var U=function(e){var t=Object(l.useContext)(A),n=!1;try{n=!(!t.loggedIn||!e.capability)&&t.user.capabilities.includes(e.capability)}catch(a){console.log("NOT AUTHORIZED",a.message)}return u.a.createElement(H,{condition:n},e.children)};function W(e){var t=Object(l.useContext)(A),n=Object(l.useState)(""),a=Object(m.a)(n,2),c=a[0],o=a[1],r=Object(l.useState)(""),i=Object(m.a)(r,2),s=i[0],f=i[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(H,{condition:t.loggedIn},u.a.createElement("button",{onClick:t.logOut}," Log Out")),u.a.createElement(H,{condition:!t.loggedIn},u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.setLogIn(c,s)}},u.a.createElement("input",{type:"text",name:"username",placeholder:"Enter Username",onChange:function(e){o(Object(d.a)({},e.target.name,e.target.value))}}),u.a.createElement("input",{type:"text",name:"password",placeholder:"Enter Password",onChange:function(e){f(Object(d.a)({},e.target.name,e.target.value))}}),u.a.createElement("button",null,"Login"))))}var F=function(e){return u.a.createElement(U,{capability:"update"},u.a.createElement("span",null,"Edit"))},J=function(e){return u.a.createElement(U,{capability:"delete"},u.a.createElement("span",null,"Delete"))},K=function(){return u.a.createElement(h,null,u.a.createElement(w,null,u.a.createElement(W,null),u.a.createElement(F,null),u.a.createElement(J,null),u.a.createElement(C,null)))},V=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return u.a.createElement(K,null)}}]),n}(u.a.Component),B=document.getElementById("root");s.a.render(u.a.createElement(V,null),B)}},[[123,1,2]]]);
//# sourceMappingURL=main.9ca7196c.chunk.js.map