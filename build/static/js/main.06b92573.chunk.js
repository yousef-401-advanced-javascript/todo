(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{136:function(e,t,n){e.exports=n(266)},149:function(e,t){},151:function(e,t){},165:function(e,t){},167:function(e,t){},195:function(e,t){},197:function(e,t){},198:function(e,t){},204:function(e,t){},206:function(e,t){},224:function(e,t){},227:function(e,t){},243:function(e,t){},246:function(e,t){},265:function(e,t,n){},266:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n(15),o=n(17),c=n(16),l=n(0),i=n.n(l),u=n(132),s=n.n(u),m=n(9),d=n(21),h=n(72),p=function(e){var t=Object(l.useState)({}),n=Object(m.a)(t,2),a=n[0],r=n[1];return[function(e){r(Object(h.a)(Object(h.a)({},a),{},Object(d.a)({},e.target.name,e.target.value)))},function(t){t.preventDefault(),t.target.reset(),e.handleSubmit(a),r({type:"reset"})}]},f=n(22),g=n(29);var b=function(e){var t=p(e),n=Object(m.a)(t,2),a=n[0],r=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Add Item"),i.a.createElement(f.a,{role:"form",onSubmit:r},i.a.createElement(f.a.Label,null,i.a.createElement("span",null,"To Do Item"),i.a.createElement(f.a.Control,{name:"text",placeholder:"Add To Do List Item",onChange:a})),i.a.createElement(f.a.Label,null,i.a.createElement("span",null,"Difficulty Rating"),i.a.createElement(f.a.Control,{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:a})),i.a.createElement(f.a.Label,null,i.a.createElement("span",null,"Assigned To"),i.a.createElement(f.a.Control,{type:"text",name:"assignee",placeholder:"Assigned To",onChange:a})),i.a.createElement(g.a,{className:"btn btn-primary btn-large centerButton",type:"submit"},"Add Item")))},E=i.a.createContext();var v=function(e){var t=Object(l.useState)(!0),n=Object(m.a)(t,2),a=n[0],r=n[1],o=Object(l.useState)(2),c=Object(m.a)(o,2),u=c[0],s=c[1],d=Object(l.useState)(1),h=Object(m.a)(d,2),p=h[0],f=h[1],g=Object(l.useState)("difficulty"),b=Object(m.a)(g,2),v=b[0],O=b[1],j=Object(l.useState)(3),y=Object(m.a)(j,2),C=y[0],S=y[1],T=Object(l.useState)(0),k=Object(m.a)(T,2),x=k[0],P=k[1],_=Object(l.useState)(1),I=Object(m.a)(_,2),w=I[0],N=I[1],D={display:a,itemsPerPage:C,numbersOfPages:x,currentPage:w,sortType:v,next:u,prev:p,setNext:s,setPrev:f,changeDisplay:r,changeItemsPerPage:S,changeNumberOfPages:P,changeCurrentPage:N,changeSortType:O,toggleMode:function(){r(!D.display)}};return i.a.createElement(E.Provider,{value:D},e.children)},O=n(24),j=n(39),y=n.n(j),C=n(73),S=n(74),T=n.n(S),k=n(133),x=n.n(k),P=n(134);n.n(P).a.config();var _=Object({NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_SERVER||"https://lab3232.herokuapp.com",I=(Object({NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).JWT_SECRET,i.a.createContext()),w=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).signup=function(){var e=Object(C.a)(y.a.mark((function e(t,n,a,o){var c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(_,"/signup"),{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n,email:a,role:o})});case 3:return c=e.sent,e.next=6,c.json();case 6:l=e.sent,r.validateToken(l.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("ERROR SIGNUP");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),r.login=function(){var e=Object(C.a)(y.a.mark((function e(t,n){var a,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(_,"/signin"),{method:"POST",mode:"cors",cache:"no-cache",headers:new Headers({Authorization:"Basic ".concat(btoa("".concat(t,":").concat(n)))})});case 3:return a=e.sent,e.next=6,a.json();case 6:o=e.sent,r.validateToken(o.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("ERROR SIGNIN");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),r.logout=function(){r.setLoginState(!1,null,{})},r.validateToken=function(e){try{var t=x.a.verify(e,"yousef");r.setLoginState(!0,e,t)}catch(n){r.logout(),console.log("token Validation error")}},r.setLoginState=function(e,t,n){T.a.save("auth",t),r.setState({loggedIn:e,user:n,token:t})},r.state={loggedIn:!1,login:r.login,logout:r.logout,sigup:r.signup,user:{}},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=T.a.load("auth")||null;this.validateToken(e)}},{key:"render",value:function(){return i.a.createElement(I.Provider,{value:this.state},this.props.children)}}]),n}(i.a.Component),N=function(e){return e.condition?e.children:null},D=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=!1;try{e=this.context.loggedIn&&(!this.props.capability||this.context.user.capabilities.includes(this.props.capability))}catch(t){console.warn("Not Authorized!")}return i.a.createElement(N,{condition:e},this.props.children)}}]),n}(i.a.Component);D.contextType=I;var L=D,R={true:{display:"block"},false:{display:"none"}};var A=function(e){var t=Object(l.useContext)(E),n=t.currentPage*t.itemsPerPage,a=n-t.itemsPerPage,r=e.list.slice(a,n);return i.a.createElement(O.a,null,r.map((function(n){return i.a.createElement(O.a,{className:"complete-".concat(n.complete.toString()),key:n._id,style:n.complete!==t.display?R[t.display]:void 0},i.a.createElement(O.a.Item,{onClick:function(){return e.handleComplete(n._id)}},"ToDo title: ",n.text,i.a.createElement(O.a.Item,null," the assignee : ",n.assignee,"   "),i.a.createElement(O.a.Item,null," The difficulty : ",n.difficulty,"   "),i.a.createElement(O.a.Item,null,"Added at ",n.due,"   ")),i.a.createElement(L,{capability:"delete"},i.a.createElement(g.a,{variant:"primary",size:"sm",onClick:function(){return e.deleteHandler1(n._id)}},"Delete"),"]         "))})))};function H(e){var t=Object(l.useContext)(E);return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"completed display"),i.a.createElement("button",{className:t.display.toString(),onClick:t.toggleMode},t.display?"don't show completed":"show completed"))}var J=n(75);function W(e){for(var t={pagination:{display:"inline-block"}},n=[],a=Object(l.useContext)(E),r=function(e){return a.changeCurrentPage(e)},o=1;o<=Math.ceil(e.list.length/a.itemsPerPage);o++)n.push(o);return i.a.createElement(i.a.Fragment,null,i.a.createElement("nav",null,i.a.createElement(J.a,{"aria-label":"Toolbar with button groups"},n.map((function(e){return i.a.createElement(J.a.Item,{key:e,onClick:function(){return r(e)}},i.a.createElement(g.a,{onClick:function(){return r(e)},style:t.pagination},e))})))))}var F=n(135);var K=function(){var e="https://lab3232.herokuapp.com/todo",t=Object(l.useState)([]),n=Object(m.a)(t,2),a=n[0],r=n[1];return[a,function(t){t.due=(new Date).toLocaleString(),fetch(e,{method:"post",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){r([].concat(Object(F.a)(a),[e]))})).catch(console.error),console.log("add",a)},function(t){var n=a.filter((function(e){return e._id===t}))[0]||{};if(n._id){n.complete=!n.complete;var o="".concat(e);fetch(o,{method:"put",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",bo:t},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){r(a.map((function(t){return t._id===n._id?e:t})))})).catch(console.error)}},function(){fetch(e,{method:"get",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return r(e)})).catch(console.error)},function(t){var n=a.filter((function(e){return e._id===t}))[0]||{},o="".concat(e);fetch(o,{method:"delete",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",bo:t},body:n?JSON.stringify(n):void 0}).then((function(e){return e.json()})).then((function(e){r(a.filter((function(e){return e._id!==t})))})).catch(console.error)}]},U=(n(265),function(){var e=K(),t=Object(m.a)(e,5),n=t[0],a=t[1],r=t[2],o=t[3],c=t[4];return Object(l.useEffect)(o,[]),console.log("list",n),i.a.createElement(i.a.Fragment,null,i.a.createElement(H,null),i.a.createElement("header",null,i.a.createElement("h2",null,"There are ",n.filter((function(e){return!e.complete})).length,"; Items To Complete")),i.a.createElement("section",{className:"todo"},i.a.createElement(L,{capability:"update"},i.a.createElement("div",null,i.a.createElement(b,{handleSubmit:a}))),i.a.createElement("div",null,i.a.createElement(A,{list:n,handleComplete:r,deleteHandler1:c}),i.a.createElement(W,{list:n}))))}),B=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(d.a)({},e.target.name,e.target.value))},r.handleSubmit=function(e){e.preventDefault(),r.context.login(r.state.username,r.state.password)},r.state={username:"",password:""},r}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N,{condition:this.context.loggedIn},i.a.createElement("button",{onClick:this.context.logout},"Logout")),i.a.createElement(N,{condition:!this.context.loggedIn},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),i.a.createElement("button",null,"Login"))))}}]),n}(i.a.Component);B.contextType=I;var V=B,M=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(d.a)({},e.target.name,e.target.value))},r.handleSubmit=function(e){e.preventDefault(),r.context.sigup(r.state.username,r.state.password,r.state.email,r.state.role)},r.state={username:"",password:"",email:"",role:""},r}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N,{condition:!this.context.loggedIn},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"email",name:"email",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"role",name:"role",onChange:this.handleChange}),i.a.createElement("button",null,"SignUP"))))}}]),n}(i.a.Component);M.contextType=I;var z=M,G=function(){return i.a.createElement(w,null,i.a.createElement(V,null),i.a.createElement(z,null),i.a.createElement(L,{capability:"read"},i.a.createElement(v,null,i.a.createElement(U,null))))},q=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(G,null)}}]),n}(i.a.Component),Q=document.getElementById("root");s.a.render(i.a.createElement(q,null),Q)}},[[136,1,2]]]);
//# sourceMappingURL=main.06b92573.chunk.js.map